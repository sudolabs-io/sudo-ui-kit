import{R as d,r as m}from"./index-CtvPRVHf.js";import{c as P}from"./index-CX7tzMzt.js";import{u as A,S as N}from"./index-BoQdhQ_x.js";import{j as I}from"./jsx-runtime-CrtPYZmV.js";function g(e){const t=e+"CollectionProvider",[r,o]=P(t),[s,n]=r(t,{collectionRef:{current:null},itemMap:new Map}),S=f=>{const{scope:c,children:C}=f,l=d.useRef(null),i=d.useRef(new Map).current;return I.jsx(s,{scope:c,itemMap:i,collectionRef:l,children:C})};S.displayName=t;const p=e+"CollectionSlot",M=d.forwardRef((f,c)=>{const{scope:C,children:l}=f,i=n(p,C),a=A(c,i.collectionRef);return I.jsx(N,{ref:a,children:l})});M.displayName=p;const u=e+"CollectionItemSlot",E="data-radix-collection-item",R=d.forwardRef((f,c)=>{const{scope:C,children:l,...i}=f,a=d.useRef(null),v=A(c,a),x=n(u,C);return d.useEffect(()=>(x.itemMap.set(a,{ref:a,...i}),()=>void x.itemMap.delete(a))),I.jsx(N,{[E]:"",ref:v,children:l})});R.displayName=u;function y(f){const c=n(e+"CollectionConsumer",f);return d.useCallback(()=>{const l=c.collectionRef.current;if(!l)return[];const i=Array.from(l.querySelectorAll(`[${E}]`));return Array.from(c.itemMap.values()).sort((x,O)=>i.indexOf(x.ref.current)-i.indexOf(O.ref.current))},[c.collectionRef,c.itemMap])}return[{Provider:S,Slot:M,ItemSlot:R},y,o]}function T(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}function D({prop:e,defaultProp:t,onChange:r=()=>{}}){const[o,s]=_({defaultProp:t,onChange:r}),n=e!==void 0,S=n?e:o,p=T(r),M=m.useCallback(u=>{if(n){const R=typeof u=="function"?u(e):u;R!==e&&p(R)}else s(u)},[n,e,s,p]);return[S,M]}function _({defaultProp:e,onChange:t}){const r=m.useState(e),[o]=r,s=m.useRef(o),n=T(t);return m.useEffect(()=>{s.current!==o&&(n(o),s.current=o)},[o,s,n]),r}export{g as c,D as u};
