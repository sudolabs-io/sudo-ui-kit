"use strict";(self.webpackChunkregistry_template=self.webpackChunkregistry_template||[]).push([[8202],{"./src/components/ui/video-player.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>video_player_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),lib=__webpack_require__("./node_modules/react-player/lib/index.js"),lib_default=__webpack_require__.n(lib),icons=__webpack_require__("./src/components/icons/index.ts");const VideoPlayer=({src,thumbnail,secondsToSeek,onPause,onCaptureThumbnail,...playerProps})=>{var _playerRef_current;const[isPlaying,setIsPlaying]=react.useState(!1),[isSeeked,setIsSeeked]=react.useState(!1),hiddenPlayerRef=react.useRef(null),playerRef=react.useRef(null),[snapshot,setSnapshot]=react.useState(null),[hoverTime,setHoverTime]=react.useState(null);var _playerRef_current_getDuration;return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(lib_default(),{...playerProps,ref:playerRef,config:{file:{attributes:{controlsList:"nodownload",crossOrigin:"true"}}},controls:!0,url:src,playing:isPlaying,onPause:()=>{var _playerRef_current;const player=null===(_playerRef_current=playerRef.current)||void 0===_playerRef_current?void 0:_playerRef_current.getInternalPlayer();if(!player)return;const seekTo=Math.round(player.currentTime);onPause&&onPause(seekTo),setIsPlaying(!1)},onPlay:()=>setIsPlaying(!0),style:{width:"100%",height:"100%"},onReady:()=>{var _playerRef_current;secondsToSeek&&!isSeeked&&(null===(_playerRef_current=playerRef.current)||void 0===_playerRef_current||_playerRef_current.seekTo(secondsToSeek,"seconds"),setIsSeeked(!0))},playIcon:(0,jsx_runtime.jsx)("div",{className:"flex h-[68px] w-[68px] items-center justify-center rounded-full bg-foreground",onClick:()=>setIsPlaying(!0),children:(0,jsx_runtime.jsx)(icons.ud,{className:"text-background"})}),light:thumbnail}),(0,jsx_runtime.jsx)(lib_default(),{...playerProps,ref:hiddenPlayerRef,config:{file:{attributes:{crossOrigin:"true"}}},url:src,style:{display:"none"}}),(0,jsx_runtime.jsx)("div",{className:"absolute bottom-0 hidden w-full px-4 lg:block",children:(0,jsx_runtime.jsx)("div",{className:"h-8 cursor-pointer bg-transparent",onClick:()=>{var _playerRef_current;const player=null===(_playerRef_current=playerRef.current)||void 0===_playerRef_current?void 0:_playerRef_current.getInternalPlayer();player&&(player.currentTime=hoverTime)},onMouseMove:e=>{var _playerRef_current;const player=null===(_playerRef_current=playerRef.current)||void 0===_playerRef_current?void 0:_playerRef_current.getInternalPlayer();if(!player)return;isPlaying&&(player.pause(),player.play());const progressBar=e.target;if(progressBar instanceof HTMLElement){var _hiddenPlayerRef_current;const rect=progressBar.getBoundingClientRect();var _hiddenPlayerRef_current_getDuration;const time=(e.clientX-rect.left)/rect.width*(null!==(_hiddenPlayerRef_current_getDuration=null===(_hiddenPlayerRef_current=hiddenPlayerRef.current)||void 0===_hiddenPlayerRef_current?void 0:_hiddenPlayerRef_current.getDuration())&&void 0!==_hiddenPlayerRef_current_getDuration?_hiddenPlayerRef_current_getDuration:0);setHoverTime(time),(time=>{var _hiddenPlayerRef_current;const player=null===(_hiddenPlayerRef_current=hiddenPlayerRef.current)||void 0===_hiddenPlayerRef_current?void 0:_hiddenPlayerRef_current.getInternalPlayer();if(!player)return;const canvas=document.createElement("canvas");player.currentTime=time,player.onseeked=()=>{const context=canvas.getContext("2d");canvas.width=player.videoWidth,canvas.height=player.videoHeight,context.drawImage(player,0,0,canvas.width,canvas.height),setSnapshot(canvas.toDataURL("image/png"))}})(time)}},onMouseLeave:()=>{setSnapshot(null),setHoverTime(null)},children:snapshot&&hoverTime&&(0,jsx_runtime.jsx)("img",{src:snapshot,alt:"snapshot",className:"absolute bottom-10 h-auto w-[220px] -translate-x-1/2",style:{left:hoverTime/(null!==(_playerRef_current_getDuration=null===(_playerRef_current=playerRef.current)||void 0===_playerRef_current?void 0:_playerRef_current.getDuration())&&void 0!==_playerRef_current_getDuration?_playerRef_current_getDuration:0)*100+"%"}})})})]})};VideoPlayer.__docgenInfo={description:"",methods:[],displayName:"VideoPlayer",props:{src:{required:!0,tsType:{name:"string"},description:""},thumbnail:{required:!1,tsType:{name:"string"},description:""},secondsToSeek:{required:!1,tsType:{name:"number"},description:""},onPause:{required:!1,tsType:{name:"signature",type:"function",raw:"(currentTime: number) => void",signature:{arguments:[{type:{name:"number"},name:"currentTime"}],return:{name:"void"}}},description:""},onCaptureThumbnail:{required:!1,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""}}};const VIDEO_SRC="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",VideoPlayerStory=({src,thumbnail})=>(0,jsx_runtime.jsx)(VideoPlayer,{src,thumbnail}),Default={render:args=>(0,jsx_runtime.jsx)(VideoPlayerStory,{...args}),args:{src:VIDEO_SRC,thumbnail:"https://picsum.photos/id/237/200/300"}},video_player_stories={title:"Components/VideoPlayer/VideoPlayer",component:VideoPlayerStory,argTypes:{src:{type:"string",defaultValue:VIDEO_SRC},thumbnail:{type:"string",defaultValue:"https://picsum.photos/id/237/200/300"}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: args => <VideoPlayerStory {...args} />,\n  args: {\n    src: VIDEO_SRC,\n    thumbnail: THUMBNAIL_SRC\n  }\n}",...Default.parameters?.docs?.source}}}}}]);